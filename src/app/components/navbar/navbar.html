<header
  class="sticky top-0 z-20 w-full border-b bg-[--bg-primary]/80 backdrop-blur-sm border-teal-400/50"
>
  <nav
    class="max-w-5xl mx-auto p-4 md:p-8 flex items-center justify-between md:justify-center md:gap-6 font-mono"
  >
    <div class="hidden md:flex items-center gap-6">
      <a
        routerLink="/"
        routerLinkActive="text-teal-300"
        [routerLinkActiveOptions]="{ exact: true }"
        class="text-gray-500 hover:text-teal-300 lang-text"
        [class.lang-text-fading]="isChanging()"
        [innerHTML]="navText().home"
      ></a>
      <a
        routerLink="/about-me"
        routerLinkActive="text-teal-300"
        class="text-gray-500 hover:text-teal-300 lang-text"
        [class.lang-text-fading]="isChanging()"
        [innerHTML]="navText().about"
      ></a>
      <a
        routerLink="/projects"
        routerLinkActive="text-teal-300"
        class="text-gray-500 hover:text-teal-300 lang-text"
        [class.lang-text-fading]="isChanging()"
        [innerHTML]="navText().projects"
      ></a>
      <a
        routerLink="/blog"
        routerLinkActive="text-teal-300"
        class="text-gray-500 hover:text-teal-300 lang-text"
        [class.lang-text-fading]="isChanging()"
        [innerHTML]="navText().blog"
      ></a>
    </div>
    <span class="hidden md:inline-block text-gray-700">|</span>

    <div class="flex flex-1 justify-start md:flex-none md:justify-center gap-4">
      <button
        (click)="setLang('es')"
        [class.text-teal-300]="lang() === 'es'"
        [class.text-gray-500]="lang() !== 'es'"
        class="font-bold text-lg hover:text-teal-300 transition-colors"
      >
        [ðŸ‡ªðŸ‡¸ ES]
      </button>
      <button
        (click)="setLang('en')"
        [class.text-teal-300]="lang() === 'en'"
        [class.text-gray-500]="lang() !== 'en'"
        class="font-bold text-lg hover:text-teal-300 transition-colors"
      >
        [ðŸ‡ºðŸ‡¸ EN]
      </button>
    </div>

    <button
      (click)="toggleMobileMenu()"
      class="md:hidden p-2 text-gray-300 hover:text-teal-300 z-30 md:order-first"
      aria-label="Toggle menu"
    >
      @if (!isMobileMenuVisible()) {
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="h-6 w-6"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
        />
      </svg>
      } @else {
      <svg
        xmlns="http://www.w3.org/2000/svg"
        fill="none"
        viewBox="0 0 24 24"
        stroke-width="2"
        stroke="currentColor"
        class="h-6 w-6"
      >
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
      }
    </button>
  </nav>

  <div
    class="md:hidden flex flex-col items-center gap-6 pb-6 transition-all duration-300 ease-in-out overflow-hidden"
    [class.max-h-64]="isMobileMenuVisible()"
    [class.opacity-100]="isMobileMenuVisible()"
    [class.visible]="isMobileMenuVisible()"
    [class.pointer-events-auto]="isMobileMenuVisible()"
    [class.max-h-0]="!isMobileMenuVisible()"
    [class.opacity-0]="!isMobileMenuVisible()"
    [class.invisible]="!isMobileMenuVisible()"
    [class.pointer-events-none]="!isMobileMenuVisible()"
  >
    <a
      routerLink="/"
      routerLinkActive="text-teal-300"
      [routerLinkActiveOptions]="{ exact: true }"
      class="text-gray-300 hover:text-teal-300 text-lg lang-text"
      [class.lang-text-fading]="isChanging()"
      [innerHTML]="navText().home"
      (click)="closeMenuAndNavigate()"
    ></a>
    <a
      routerLink="/about-me"
      routerLinkActive="text-teal-300"
      class="text-gray-300 hover:text-teal-300 text-lg lang-text"
      [class.lang-text-fading]="isChanging()"
      [innerHTML]="navText().about"
      (click)="closeMenuAndNavigate()"
    ></a>
    <a
      routerLink="/projects"
      routerLinkActive="text-teal-300"
      class="text-gray-300 hover:text-teal-300 text-lg lang-text"
      [class.lang-text-fading]="isChanging()"
      [innerHTML]="navText().projects"
      (click)="closeMenuAndNavigate()"
    ></a>
    <a
      routerLink="/blog"
      routerLinkActive="text-teal-300"
      class="text-gray-300 hover:text-teal-300 text-lg lang-text"
      [class.lang-text-fading]="isChanging()"
      [innerHTML]="navText().blog"
      (click)="closeMenuAndNavigate()"
    ></a>
  </div>
</header>
